<div class="region region--no-space-top">
  <h2 class="h2">Entiteiten</h2>
</div>
{% for entity in data.entities %}
  <div class="region region--no-space-top">
    <h3 class="h3" id="{{ entity.id }}">
      <a href="{{ entity.id }}" data-toggle="tooltip" data-content="{{ entity.id }}" id="{{ entity.applicationProfileLabel[language] }}" data-placement="right">
        {{ entity.applicationProfileLabel[language] }}</a>
    </h3>
    <div class="region region--no-space-top">
      <dl>
        <dt>Beschrijving</dt>
        <dd>
          {{ entity.applicationProfileDefinition[language] }}
        </dd>
        {% if entity.usage[language] %}
          <dt>Gebruik</dt>
          <dd>
            {{ entity.applicationProfileUsageNote[language] | safe }}
          </dd>
        {% endif %}
        {% if ((entity.parents | length) > 0 ) %}
          <dt>Subklasse van
            <dt>
              <dd>
                {%- for parent in entity['parents'] %}
                  <a href="{{ parent.id }}">
                    {{ parent.applicationProfileLabel[language] }}</a>
                  {% if not loop.last %},
                  {% endif %}
                {%- endfor %}
              </dd>
            {% endif %}
            <dt>Eigenschappen</dt>
            {% if ((entity.properties | length) > 0 ) %}
              <dd>Voor deze entiteit zijn de volgende eigenschappen gedefinieerd:
                {%- for prop in entity['properties'] %}
                  <a href="#{{ (entity.applicationProfileLabel[language] ~ ':' ~ prop.applicationProfileLabel[language]) | urlencode }}">{{ prop.applicationProfileLabel[language] }}</a>
                  {% if not loop.last %},
                  {% endif %}
                {%- endfor %}.
              </dd>
            {% else %}
              <dd>Voor deze entiteit zijn geen eigenschappen gedefinieerd.</dd>
            {% endif %}
          </dl>
        </div>
        {% if ((entity.properties | length) > 0 ) %}
          <div class="u-table-overflow">
            <table class="data-table">
              <thead>
                <tr class="data-table__header">
                  <th class="data-table__header-title--sortable data-table__header-title--sortable-active">Eigenschap</th>
                  <th class="data-table__header-title--sortable">Verwacht Type</th>
                  <th class="data-table__header-title--sortable">Kardinaliteit</th>
                  <th class="data-table__header-title--sortable">Beschrijving</th>
                  <th class="data-table__header-title--sortable">Gebruik</th>
                  <th class="data-table__header-title--sortable">Codelijst</th>
                </tr>
              </thead>
              <tbody class="supertype">
                {% for prop in entity['properties'] %}
                  <tr id="{{ (entity.applicationProfileLabel[language] ~ ':' ~ prop.applicationProfileLabel[language]) | urlencode }}" typeof="rdfs:Property" resource="{{ prop.uri }}">
                    <td>
                      <code property="rdfs:label">
                        <a href="{{ prop.id }}" data-toggle="tooltip" data-content="{{ prop.id }}" data-placement="right">
                          {{ prop.applicationProfileLabel[language] }}</a>
                      </code>
                    </td>
                    <td>
                      {% if prop.range %}
                        <a href="{{ prop.range.id }}" data-toggle="tooltip" data-content="{{ prop.range.id }}" data-placement="right">
                          {{ prop.range.applicationProfileLabel[language] }}</a>
                      {% endif %}
                    </td>
                    <td>
                      {% if prop.minCount == prop.maxCount %}
                        {% set cardinality = prop.minCount %}
                      {% else %}
                        {% set cardinality = prop.minCount + '..' + prop.maxCount %}
                      {% endif %}
                      {{ cardinality }}
                    </td>
                    <td property="rdfs:comment">
                      {{ prop.applicationProfileDefinition[language] }}
                    </td>
                    <td property="vann:usageNote">
                      {{ prop.applicationProfileUsageNote[language] | safe }}
                    </td>
                    <td>
                      {% if prop.codelist %}
                        <a href="{{ prop.codelist }}">Link</a>
                      {% endif %}
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% endif %}
      </div>
    {% endfor %}