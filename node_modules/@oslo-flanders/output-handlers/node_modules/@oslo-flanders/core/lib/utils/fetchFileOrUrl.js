"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.fetchFileOrUrl = void 0;
const fs_1 = require("fs");
const promises_1 = require("fs/promises");
const node_fetch_1 = __importDefault(require("node-fetch"));
async function fetchFileOrUrl(file) {
    if (file.startsWith('http://') || file.startsWith('https://')) {
        return (await (0, node_fetch_1.default)(file)).buffer();
    }
    if (file.startsWith('file://')) {
        file = file.slice(7);
    }
    if (!(0, fs_1.existsSync)(file) || !(await (0, promises_1.stat)(file)).isFile()) {
        throw new Error(`Path does not refer to a valid file: ${file}`);
    }
    return (0, promises_1.readFile)(file);
}
exports.fetchFileOrUrl = fetchFileOrUrl;
//# sourceMappingURL=fetchFileOrUrl.js.map