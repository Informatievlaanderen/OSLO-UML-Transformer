{"version":3,"file":"cli.utils.js","sourceRoot":"","sources":["cli.utils.ts"],"names":[],"mappings":";;;AAAA,iDAAqC;AAG9B,MAAM,kBAAkB,GAAG,CAAC,SAAqB,EAAU,EAAE,CAClE,+BAA+B,SAAS,CAAC,OAAO,kBAAkB,SAAS,CAAC,WAAW,wBAAwB,SAAS,CAAC,iBAAiB,gBAAgB,SAAS,CAAC,SAAS,6BAA6B,SAAS,CAAC,sBAAsB,EAAE,CAAC;AADlO,QAAA,kBAAkB,sBACgN;AAExO,MAAM,UAAU,GAAG,CAAC,OAAe,EAAmB,EAAE,CAC7D,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;IAC9B,IAAA,oBAAI,EAAC,OAAO,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE;QACtC,IAAI,MAAM,EAAE,CAAC;YACX,MAAM,WAAW,GAAa,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YACjD,MAAM,UAAU,GAAW,WAAW,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CACxD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CACxB,CAAC;YACF,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,CAAC;gBACzC,MAAM,CACJ,IAAI,KAAK,CACP,GAAG,WAAW,CAAC,CAAC,CAAC,MAAM,WAAW,CAAC,CAAC,CAAC,MAAM,WAAW,CAAC,EAAE,CAAC,EAAE,CAC7D,CACF,CAAC;YACJ,CAAC;iBAAM,CAAC;gBACN,MAAM,CAAC,IAAI,KAAK,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC7C,CAAC;QACH,CAAC;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAnBQ,QAAA,UAAU,cAmBlB","sourcesContent":["import { exec } from 'child_process';\nimport type { IEapConfig } from '../types/config';\n\nexport const generateCliCommand = (eapConfig: IEapConfig): string =>\n  `oslo-converter-ea --umlFile ${eapConfig.umlFile} --diagramName ${eapConfig.diagramName} --specificationType ${eapConfig.specificationType} --versionId ${eapConfig.versionId} --publicationEnvironment ${eapConfig.publicationEnvironment}`;\n\nexport const runCommand = (command: string): Promise<string> =>\n  new Promise((resolve, reject) => {\n    exec(command, (error, stdout, stderr) => {\n      if (stderr) {\n        const stderrLines: string[] = stderr.split('\\n');\n        const errorIndex: number = stderrLines.findIndex((line) =>\n          line.includes('Error:'),\n        );\n        if (stderrLines[0].includes('TypeError')) {\n          reject(\n            new Error(\n              `${stderrLines[0]}\\n ${stderrLines[9]}\\n ${stderrLines[10]}`,\n            ),\n          );\n        } else {\n          reject(new Error(stderrLines[errorIndex]));\n        }\n      }\n    });\n  });\n"]}